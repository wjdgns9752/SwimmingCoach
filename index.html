<!doctype html>
<html lang="ko">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />
  <meta name="description" content="수영 훈련과 자세 교정을 위한 나만의 일일 코치">
  <title>일일 스위밍 코치</title>
  <link href='/style.css' rel='stylesheet'>
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <link href="https://fonts.googleapis.com/css2?family=Pretendard:wght@400;600;800&display=swap" rel="stylesheet">
</head>
<body>

  <!-- Onboarding Modal -->
  <div id="onboarding-overlay" class="onboarding-overlay">
    <div class="onboarding-content">
      <h1>환영합니다! 👋</h1>
      <p>코칭을 시작하기 위해 기본 정보를 알려주세요.</p>
      
      <div class="onboarding-form">
          <label for="onboard-nickname">닉네임</label>
          <input type="text" id="onboard-nickname" placeholder="예: 물개, 마린보이" autocomplete="off">
      </div>

      <p class="sub-text">현재 수영 실력은 어느 정도인가요?</p>
      
      <div class="level-grid">
        <button class="level-card" onclick="completeOnboarding('beginner')">
          <div class="level-icon">🐣</div>
          <h3>초급 (Beginner)</h3>
          <p>물 적응, 기초 호흡 및 발차기</p>
        </button>
        <button class="level-card" onclick="completeOnboarding('intermediate')">
          <div class="level-icon">🏊</div>
          <h3>중급 (Intermediate)</h3>
          <p>자유형/배영 마스터, 25m 완주 가능</p>
        </button>
        <button class="level-card" onclick="completeOnboarding('advanced')">
          <div class="level-icon">🐬</div>
          <h3>상급 (Advanced)</h3>
          <p>4가지 영법 구사, 턴/스타트 숙련</p>
        </button>
        <button class="level-card" onclick="completeOnboarding('masters')">
          <div class="level-icon">🏅</div>
          <h3>마스터즈 (Masters)</h3>
          <p>대회 준비, 기록 단축 훈련</p>
        </button>
        <button class="level-card" onclick="completeOnboarding('elite')">
          <div class="level-icon">🏆</div>
          <h3>선수 (Elite)</h3>
          <p>전문 선수, 한계 돌파 훈련</p>
        </button>
      </div>
    </div>
  </div>

  <!-- Workout Detail Modal -->
  <div id="workout-modal" class="modal-overlay hidden">
    <div class="modal-content">
        <div class="modal-header">
            <h2 id="modal-title">훈련 상세 가이드</h2>
            <button class="close-btn" onclick="closeWorkoutModal()">&times;</button>
        </div>
        <div class="modal-body" id="modal-body">
            <!-- Populated by JS -->
        </div>
    </div>
  </div>

  <!-- App Header (Desktop Only / Logo Area) -->
  <header class="app-header">
    <div class="logo">
      <span class="logo-icon">🏊</span>
      <span class="logo-text">스위밍코치</span>
    </div>
    <!-- Desktop Nav -->
    <nav class="desktop-nav">
      <ul>
        <li><a href="#" data-page="dashboard" class="nav-link active">대시보드</a></li>
        <li><a href="#" data-page="logger" class="nav-link">훈련 일지</a></li>
        <li><a href="#" data-page="analysis" class="nav-link">AI 분석</a></li>
        <li><a href="#" data-page="profile" class="nav-link">내 기록</a></li>
      </ul>
    </nav>
  </header>

  <main class="app-container">
    
    <!-- PAGE: DASHBOARD -->
    <section id="dashboard-page" class="page-section active">
      <div class="hero-mini">
        <h1 id="user-greeting">오늘도 물살을 가를 준비 되셨나요?</h1>
        <p id="dashboard-goal" class="hero-sub">목표: 설정되지 않음</p>
      </div>

      <div class="features">
        <div class="feature-card main-plan-card">
          <div class="card-header">
              <div class="icon">📝</div>
              <h3>오늘의 맞춤 훈련</h3>
          </div>
          <p id="daily-plan-text">데이터 로딩 중...</p>
          <div class="card-footer">
              <span class="status-badge" id="user-level-badge">레벨 확인 중</span>
              <span class="tap-hint">터치하여 상세 가이드 보기 &rarr;</span>
          </div>
        </div>

        <div class="feature-card">
          <div class="icon">📅</div>
          <h3>이번 주 누적 거리</h3>
          <p id="total-distance-display" class="big-number">0 m</p>
        </div>
        
        <div class="feature-card">
          <div class="icon">🏆</div>
          <h3>최근 대회 기록</h3>
          <p id="pr-display" class="big-number-sm">기록 없음</p>
          <button class="link-btn" onclick="navigateTo('profile')">기록 추가하기</button>
        </div>

        <div class="feature-card">
          <div class="icon">📈</div>
          <h3>최근 활동</h3>
          <ul id="recent-activity-list" class="activity-list">
              <li class="empty-state">아직 기록된 훈련이 없습니다.</li>
          </ul>
        </div>
      </div>
    </section>

    <!-- PAGE: LOGGER -->
    <section id="logger-page" class="page-section hidden">
      <div class="page-header">
        <h2>훈련 일지 작성</h2>
        <p>오늘의 수영을 기록하고 성장을 확인하세요.</p>
      </div>
      
      <form id="swim-log-form" class="logger-form">
        <!-- Date & Time -->
        <div class="form-card">
            <h3>📅 날짜 및 시간</h3>
            <div class="input-group">
                <input type="date" id="date" required>
                <div class="duration-input">
                    <input type="number" id="duration" placeholder="45" required min="0">
                    <span class="unit">분 동안</span>
                </div>
            </div>
        </div>

        <!-- Distance -->
        <div class="form-card">
            <h3>🏊 수영 거리</h3>
            <div class="distance-input-wrapper">
                <input type="number" id="distance" placeholder="1500" required min="0" step="50">
                <span class="unit-large">m</span>
            </div>
            <div class="quick-add-buttons">
                <button type="button" onclick="addDistance(500)">+500</button>
                <button type="button" onclick="addDistance(100)">+100</button>
                <button type="button" onclick="addDistance(50)">+50</button>
            </div>
        </div>

        <!-- Mood / Feeling -->
        <div class="form-card">
            <h3>Condition (오늘의 기분)</h3>
            <div class="mood-selector">
                <input type="radio" name="mood" id="mood-good" value="good" hidden checked>
                <label for="mood-good" class="mood-btn">🤩<br>최고</label>

                <input type="radio" name="mood" id="mood-soso" value="soso" hidden>
                <label for="mood-soso" class="mood-btn">🙂<br>보통</label>

                <input type="radio" name="mood" id="mood-bad" value="bad" hidden>
                <label for="mood-bad" class="mood-btn">😫<br>힘듦</label>
            </div>
        </div>

        <!-- Notes -->
        <div class="form-card">
            <h3>메모</h3>
            <textarea id="notes" rows="3" placeholder="자세, 페이스 등 특이사항을 적어주세요."></textarea>
        </div>

        <button type="submit" class="floating-submit-btn">기록 저장하기</button>
      </form>
    </section>

    <!-- PAGE: ANALYSIS -->
    <section id="analysis-page" class="page-section hidden">
      <div class="page-header">
        <h2>AI 영법 정밀 분석</h2>
        <p>수영 영상을 업로드하여 자세를 교정받으세요.</p>
      </div>

      <div class="analysis-controls">
        <div class="form-row">
            <div class="form-group">
                <label>풀 길이</label>
                <select id="ana-pool-length" class="form-select">
                    <option value="25">25m (숏코스)</option>
                    <option value="50">50m (롱코스)</option>
                </select>
            </div>
            <div class="form-group">
                <label>종목</label>
                <select id="ana-event-type" class="form-select"></select>
            </div>
        </div>
      </div>
      
      <div class="upload-zone" id="upload-zone">
        <input type="file" id="video-upload" accept="video/*" hidden>
        <div class="upload-content">
          <span class="upload-icon">📹</span>
          <h3>동영상 업로드</h3>
          <p>터치 또는 드래그 (Max 500MB)</p>
        </div>
      </div>

      <div id="analysis-results" class="analysis-results hidden">
        <div class="loading-overlay hidden" id="analysis-loader">
          <div class="spinner"></div>
          <p>AI가 영상을 분석하고 있습니다...</p>
        </div>

        <div class="result-card">
          <div class="result-header">
              <h3>분석 리포트</h3>
              <div class="lane-selector">
                  <div class="lane-tabs" id="lane-tabs"></div>
              </div>
          </div>

          <div class="video-meta">
            <span class="badge" id="res-badge-pool">--</span>
            <span class="badge" id="res-badge-event">--</span>
            <span class="badge lane-badge" id="res-badge-lane">Lane 1</span>
          </div>

          <div class="metrics-grid">
            <div class="metric-item">
              <span class="label">기록</span>
              <span class="value" id="res-total-time">--</span>
            </div>
            <div class="metric-item">
              <span class="label">반응/턴</span>
              <span class="value" id="res-reaction">--</span>
            </div>
            <div class="metric-item">
              <span class="label">효율성</span>
              <span class="value" id="res-efficiency">--</span>
            </div>
          </div>

          <div class="ai-solution-card" id="ai-solution">
              <h4>💡 AI 코칭 솔루션</h4>
              <p id="ai-solution-text">...</p>
          </div>

          <div class="table-container">
            <table class="splits-table">
                <thead id="splits-head"></thead>
                <tbody id="splits-body"></tbody>
            </table>
          </div>
        </div>
      </div>
    </section>

    <!-- PAGE: PROFILE -->
    <section id="profile-page" class="page-section hidden">
      <div class="page-header">
        <h2>내 정보 관리</h2>
      </div>

      <div class="form-card" style="margin-bottom: 1.5rem;">
          <h3>👤 프로필 및 목표 설정</h3>
          <div class="input-group">
              <label style="min-width: 60px;">닉네임</label>
              <input type="text" id="profile-nickname" placeholder="닉네임">
          </div>
          <div class="input-group" style="margin-top: 1rem;">
              <label style="min-width: 60px;">레벨</label>
              <select id="profile-level" class="form-select">
                  <option value="beginner">초급 (Beginner)</option>
                  <option value="intermediate">중급 (Intermediate)</option>
                  <option value="advanced">상급 (Advanced)</option>
                  <option value="masters">마스터즈 (Masters)</option>
                  <option value="elite">선수 (Elite)</option>
              </select>
          </div>
          <div class="input-group" style="margin-top: 1rem;">
              <label style="min-width: 60px;">목표</label>
              <select id="profile-goal" class="form-select">
                  <option value="endurance">지구력 향상 (오래 수영하기)</option>
                  <option value="speed">스피드/기록 단축</option>
                  <option value="technique">자세 교정 및 효율성</option>
                  <option value="diet">다이어트 / 체력 증진</option>
                  <option value="competition">대회 준비 (실전 모드)</option>
              </select>
          </div>
          <button onclick="saveProfileChanges()" class="secondary-btn" style="margin-top: 1rem;">변경사항 저장</button>
      </div>

      <form id="competition-form" class="logger-form">
         <div class="form-card">
             <h3>🏆 새 대회 기록 추가</h3>
             <div class="form-group">
                <label>대회/측정명</label>
                <input type="text" id="comp-name" placeholder="예: 3월 정기 측정" required>
             </div>
             <div class="form-row">
                 <div class="form-group half">
                    <label>날짜</label>
                    <input type="date" id="comp-date" required>
                 </div>
                 <div class="form-group half">
                     <label>기록</label>
                     <input type="text" id="comp-time" placeholder="00:00.00" required>
                 </div>
             </div>
             <div class="form-group">
                 <label>종목</label>
                 <select id="comp-event" class="form-select">
                     <option value="자유형 50m">자유형 50m</option>
                     <option value="자유형 100m">자유형 100m</option>
                     <option value="배영 50m">배영 50m</option>
                     <option value="평영 50m">평영 50m</option>
                     <option value="접영 50m">접영 50m</option>
                     <option value="개인혼영 200m">개인혼영 200m</option>
                 </select>
             </div>
             <button type="submit" class="primary-btn">저장하기</button>
         </div>
      </form>

      <div class="records-list-container">
          <h3>📜 기록 히스토리</h3>
          <ul id="records-list" class="records-list"></ul>
      </div>
    </section>

  </main>

  <!-- Mobile Bottom Navigation -->
  <nav class="mobile-bottom-nav">
    <a href="#" data-page="dashboard" class="nav-item active">
      <span class="nav-icon">🏠</span>
      <span class="nav-text">홈</span>
    </a>
    <a href="#" data-page="logger" class="nav-item">
      <span class="nav-icon">✏️</span>
      <span class="nav-text">일지</span>
    </a>
    <a href="#" data-page="analysis" class="nav-item">
      <span class="nav-icon">📷</span>
      <span class="nav-text">분석</span>
    </a>
    <a href="#" data-page="profile" class="nav-item">
      <span class="nav-icon">👤</span>
      <span class="nav-text">기록</span>
    </a>
  </nav>

  <script type="module" src="/main.js"></script>
</body>
</html>
